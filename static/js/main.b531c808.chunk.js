(this["webpackJsonpuser-dashboard"]=this["webpackJsonpuser-dashboard"]||[]).push([[0],{176:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(29),l=n(3),s=n(5),c=Object(s.a)(),i=n(12),u=n(73),m=n(74),d="USERS_LOGIN_REQUEST",p="USERS_LOGIN_SUCCESS",E="USERS_LOGIN_FAILURE",f="USERS_LOGOUT",g="GET_USERS_REQUEST",h="GET_USERS_SUCCESS",b="GET_USERS_FAILURE",v="GET_POSTS_REQUEST",S="GET_POSTS_SUCCESS",y="GET_POSTS_FAILURE",O=JSON.parse(localStorage.getItem("user")),j=O?{loggedIn:!0,user:O}:{};var U=Object(i.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{loggingIn:!0,user:t.user};case p:return{loggedIn:!0,user:t.user};case E:case f:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{loading:!0};case h:return{users:t.users};case b:return{error:t.error};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{loading:!0};case S:return{posts:t.posts};case y:return{error:t.error};default:return e}}}),w=Object(m.createLogger)(),N=Object(i.d)(U,Object(i.a)(u.a,w));function I(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var T=n(2),_=n(11),P=n(48).DataTable;var C=n(48).DataTable;function R(e){var t=Object(T.i)().blogId,n=Object(T.g)(),r=e.location.blog;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.a.createElement("div",null,"Now showing post ",t),a.a.createElement("button",{onClick:function(){return n.goBack()}},"Back")),a.a.createElement("div",null,a.a.createElement("table",{border:"1"},a.a.createElement("tr",null,a.a.createElement("th",null,"User ID"),a.a.createElement("th",null,"Title"),a.a.createElement("th",null,"Body")),a.a.createElement("tr",null,a.a.createElement("td",null,r.userId),a.a.createElement("td",null,r.title),a.a.createElement("td",null,r.body)))))}var k=[{path:"/home/users",component:function(){var e=Object(l.useSelector)((function(e){return e.users.users})),t=[{title:"ID",prop:"id"},{title:"Name",prop:"name"},{title:"User Name",prop:"username"},{title:"Email",prop:"email"},{title:"Address",prop:"address",render:function(e,t){return a.a.createElement("div",null,a.a.createElement("div",null,t.address.street),a.a.createElement("div",null,t.address.suite),a.a.createElement("div",null,t.address.city),a.a.createElement("div",null,t.address.zipcode))}},{title:"Phone",prop:"phone"},{title:"Website",prop:"website"},{title:"Company",prop:"company",render:function(e,t){return a.a.createElement("div",null,a.a.createElement("div",null,t.company.name),a.a.createElement("div",null,t.company.catchPhrase),a.a.createElement("div",null,t.company.bs))}}];return a.a.createElement("div",null,e.length>0?a.a.createElement(P,{keys:"id",columns:t,initialData:e,initialPageLength:5}):"No details")}},{path:"/home/blogs",component:function(){var e=Object(l.useSelector)((function(e){return e.posts.posts})),t=Object(l.useSelector)((function(e){return e.users.users})),n=e.map((function(e,n){var r=t.findIndex((function(t){return t.id===e.userId}));return Object.assign({},e,{name:t[r].name,username:t[r].username})}));function r(t){var n=t.id,r=e.find((function(e){return e.id===n})),a={pathname:"/blogs/".concat(n),blog:r};c.push(a)}return a.a.createElement("div",null,e.length>0?a.a.createElement(C,{keys:"id",columns:[{title:"ID",prop:"id"},{title:"Name",prop:"name"},{title:"User Name",prop:"username"},{title:"Title",prop:"title"},{title:"Body",prop:"body"}],initialData:n,initialPageLength:10,initialSortBy:{prop:"city",order:"descending"},buildRowOptions:function(e){return{onClick:r.bind({},e)}}}):"No details")}},{path:"/home/blogs/:blogId",component:R}];function L(){var e=Object(l.useSelector)((function(e){return e.authentication.user}));function t(e){return a.a.createElement(T.b,{path:e.path,render:function(t){return a.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})}return a.a.createElement("div",null,a.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.a.createElement("h1",null,"Hi ",e.name,"!"),a.a.createElement("div",{style:{fontSize:26}},a.a.createElement(_.a,{to:"/login"},"Logout"))),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(_.a,{to:"/home/users"},"Users")),a.a.createElement("div",null,a.a.createElement(_.a,{to:"/home/blogs"},"Blogs"))),a.a.createElement("div",{style:{paddingLeft:"3%"}},a.a.createElement(T.d,null,k.map((function(e,n){return a.a.createElement(t,Object.assign({key:n},e))}))))))}var G=n(31),x=n(46),B=n(32),D={config:JSON.stringify({apiUrl:"https://jsonplaceholder.typicode.com"})},J={getUsers:function(){return fetch("".concat(z,"/users"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(F)},logout:A,getPosts:function(){return fetch("".concat(z,"/posts"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(F)},getById:function(e){var t={method:"GET",headers:I()};return fetch("".concat(D.apiUrl,"/users/").concat(e),t).then(F)}},z=JSON.parse(D.config).apiUrl;function A(){localStorage.removeItem("user")}function F(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&A();var r=n&&n.message||e.statusText;return Promise.reject(r)}return n}))}var Q={getUsers:function(){return function(e){e({type:g}),J.getUsers().then((function(t){e(function(e){return{type:h,users:e}}(t))}),(function(t){console.log(t.toString()),e(function(e){return{type:b,error:e}}(t.toString()))}))}},login:function(e,t,n){return function(e){e(function(e){return{type:p,user:e}}(t)),c.push(n)}},getPosts:function(){return function(e){e({type:v}),J.getPosts().then((function(t){e(function(e){return{type:S,posts:e}}(t))}),(function(t){console.log(t.toString()),e(function(e){return{type:y,error:e}}(t.toString()))}))}},logout:function(){return J.logout(),{type:f}}};function q(){var e=Object(r.useState)({username:"",password:""}),t=Object(B.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(""),c=Object(B.a)(s,2),i=c[0],u=c[1],m=Object(r.useState)(!1),d=Object(B.a)(m,2),p=d[0],E=d[1],f=n.username,g=n.password,h=Object(l.useSelector)((function(e){return e.authentication.loggingIn})),b=Object(l.useSelector)((function(e){return e.users.users})),v=Object(l.useDispatch)(),S=Object(T.h)();function y(e){var t=e.target,n=t.name,r=t.value;o((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(G.a)({},n,r))}))}return Object(r.useEffect)((function(){v(Q.getUsers()),v(Q.getPosts())}),[]),a.a.createElement("div",{className:"col-lg-8 offset-lg-2"},a.a.createElement("h2",null,"Login"),a.a.createElement("form",{name:"form",onSubmit:function(e){if(e.preventDefault(),function(){if("undefined"!==typeof n.username){if(new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(n.username))return!0}return!1}())if(E(!0),u(""),f&&g&&f===g){var t=(S.state||{from:{pathname:"/home"}}).from,r=b.findIndex((function(e){return e.email===f}));r>-1&&v(Q.login(f,b[r],t))}else u("Please enter valid email address and password.");else u("Please enter valid email address.");console.log(i)}},a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Username"),a.a.createElement("input",{type:"text",name:"username",value:f,onChange:y,className:"form-control"+(p&&!f?" is-invalid":"")}),p&&!f&&a.a.createElement("div",{className:"invalid-feedback"},"Username is required")),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",null,"Password"),a.a.createElement("input",{type:"password",name:"password",value:g,onChange:y,className:"form-control"+(p&&!g?" is-invalid":"")}),p&&!g&&a.a.createElement("div",{className:"invalid-feedback"},"Password is required")),a.a.createElement("div",{className:"form-group"},a.a.createElement("button",{className:"btn btn-primary"},h&&a.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login")),a.a.createElement("div",{className:"form-group"},i?a.a.createElement("div",{style:{color:"red"}},i):null)))}function $(){return a.a.createElement("div",{className:"jumbotron"},a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(T.c,{history:c},a.a.createElement(T.d,null,a.a.createElement(T.b,{exact:!0,path:"/",component:q}),a.a.createElement(T.b,{exact:!0,path:"/user_dashboard",component:q}),a.a.createElement(T.b,{path:"/login",component:q}),a.a.createElement(T.b,{path:"/home",component:L}),a.a.createElement(T.b,{path:"/blogs/:blogId",component:R}),a.a.createElement(T.a,{from:"*",to:"/"}))))))}Object(o.render)(a.a.createElement(l.Provider,{store:N},a.a.createElement($,null)),document.getElementById("root"))},75:function(e,t,n){e.exports=n(176)}},[[75,1,2]]]);
//# sourceMappingURL=main.b531c808.chunk.js.map