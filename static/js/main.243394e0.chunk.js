(this["webpackJsonpuser-dashboard"]=this["webpackJsonpuser-dashboard"]||[]).push([[0],{31:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),l=n(5),s=n(4),c=Object(s.a)(),u=n(11),i=n(26),m=n(27),d="USERS_LOGIN_REQUEST",f="USERS_LOGIN_SUCCESS",E="USERS_LOGIN_FAILURE",p="USERS_LOGOUT",g="GET_USERS_REQUEST",b="GET_USERS_SUCCESS",h="GET_USERS_FAILURE",v="GET_POSTS_REQUEST",S="GET_POSTS_SUCCESS",y="GET_POSTS_FAILURE",O=JSON.parse(localStorage.getItem("user")),j=O?{loggedIn:!0,user:O}:{};var w=Object(u.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return{loggingIn:!0,user:t.user};case f:return{loggedIn:!0,user:t.user};case E:case p:return{};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{loading:!0};case b:return{users:t.users};case h:return{error:t.error};default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return{loading:!0};case S:return{posts:t.posts};case y:return{error:t.error};default:return e}}}),N=Object(m.createLogger)(),U=Object(u.d)(w,Object(u.a)(i.a,N));function I(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var T=n(2),_=n(10),C=n(15),R=n.n(C);function P(e){var t=Object(T.i)().blogId,n=Object(T.g)(),a=e.location.blog;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,"Now showing post ",t),r.a.createElement("button",{onClick:function(){return n.goBack()}},"Back")),r.a.createElement("div",null,r.a.createElement("table",{border:"1"},r.a.createElement("tr",null,r.a.createElement("th",null,"User ID"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Body")),r.a.createElement("tr",null,r.a.createElement("td",null,a.userId),r.a.createElement("td",null,a.title),r.a.createElement("td",null,a.body)))))}var k=[{path:"/home/users",component:function(){var e=Object(l.c)((function(e){return e.users.users})),t=[{name:"id",selector:"id"},{name:"name",selector:"name",sortable:!0},{name:"username",selector:"username",sortable:!0},{name:"email",selector:"email",sortable:!0},{name:"address",selector:"address",sortable:!0,cell:function(e){return r.a.createElement("div",null,r.a.createElement("div",null,e.address.street),r.a.createElement("div",null,e.address.suite),r.a.createElement("div",null,e.address.city),r.a.createElement("div",null,e.address.zipcode))}},{name:"phone",selector:"phone",sortable:!0},{name:"website",selector:"website",sortable:!0},{name:"company",selector:"company",sortable:!0,cell:function(e){return r.a.createElement("div",null,r.a.createElement("div",null,e.company.name),r.a.createElement("div",null,e.company.catchPhrase),r.a.createElement("div",null,e.company.bs))}}];return r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},e.length>0?r.a.createElement(R.a,{title:"Users",columns:t,data:e,highlightOnHover:!0}):"No details")}},{path:"/home/blogs",component:function(){var e=Object(l.c)((function(e){return e.posts.posts}));return r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},e.length>0?r.a.createElement(R.a,{title:"Posts",highlightOnHover:!0,columns:[{name:"userId",selector:"userId"},{name:"id",selector:"id",sortable:!0},{name:"title",selector:"title",sortable:!0,wrap:!0},{name:"body",selector:"body",sortable:!0,wrap:!0}],data:e,pagination:!0,onRowClicked:function(t){var n=t.id,a=e.find((function(e){return e.id===n})),r={pathname:"/blogs/".concat(n),blog:a};c.push(r)}}):"No details")}},{path:"/home/blogs/:blogId",component:P}];function G(){var e=Object(l.c)((function(e){return e.authentication.user}));function t(e){return r.a.createElement(T.b,{path:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})}return r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h1",null,"Hi ",e.name,"!"),r.a.createElement("div",{style:{fontSize:26}},r.a.createElement(_.a,{to:"/login"},"Logout"))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(_.a,{to:"/home/users"},"Users")),r.a.createElement("div",null,r.a.createElement(_.a,{to:"/home/blogs"},"Blogs"))),r.a.createElement("div",null,r.a.createElement(T.d,null,k.map((function(e,n){return r.a.createElement(t,Object.assign({key:n},e))}))))))}var x=n(16),L=n(22),B=n(17),J={config:JSON.stringify({apiUrl:"https://jsonplaceholder.typicode.com"})},z={getUsers:function(){return fetch("".concat(A,"/users"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(H)},logout:F,getPosts:function(){return fetch("".concat(A,"/posts"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(H)},getById:function(e){var t={method:"GET",headers:I()};return fetch("".concat(J.apiUrl,"/users/").concat(e),t).then(H)}},A=JSON.parse(J.config).apiUrl;function F(){localStorage.removeItem("user")}function H(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&F();var a=n&&n.message||e.statusText;return Promise.reject(a)}return n}))}var Q={getUsers:function(){return function(e){e({type:g}),z.getUsers().then((function(t){e(function(e){return{type:b,users:e}}(t))}),(function(t){console.log(t.toString()),e(function(e){return{type:h,error:e}}(t.toString()))}))}},login:function(e,t,n){return function(e){e(function(e){return{type:f,user:e}}(t)),c.push(n)}},getPosts:function(){return function(e){e({type:v}),z.getPosts().then((function(t){e(function(e){return{type:S,posts:e}}(t))}),(function(t){console.log(t.toString()),e(function(e){return{type:y,error:e}}(t.toString()))}))}},logout:function(){return z.logout(),{type:p}}};function q(){var e=Object(a.useState)({username:"",password:""}),t=Object(B.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(""),c=Object(B.a)(s,2),u=c[0],i=c[1],m=Object(a.useState)(!1),d=Object(B.a)(m,2),f=d[0],E=d[1],p=n.username,g=n.password,b=Object(l.c)((function(e){return e.authentication.loggingIn})),h=Object(l.c)((function(e){return e.users.users})),v=Object(l.b)(),S=Object(T.h)();function y(e){var t=e.target,n=t.name,a=t.value;o((function(e){return Object(L.a)(Object(L.a)({},e),{},Object(x.a)({},n,a))}))}return Object(a.useEffect)((function(){v(Q.getUsers()),v(Q.getPosts())}),[]),r.a.createElement("div",{className:"col-lg-8 offset-lg-2"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:function(e){if(e.preventDefault(),function(){if("undefined"!==typeof n.username){if(new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(n.username))return!0}return!1}())if(E(!0),i(""),p&&g&&p===g){var t=(S.state||{from:{pathname:"/home"}}).from,a=h.findIndex((function(e){return e.email===p}));a>-1&&v(Q.login(p,h[a],t))}else i("Please enter valid email address and password.");else i("Please enter valid email address.");console.log(u)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",value:p,onChange:y,className:"form-control"+(f&&!p?" is-invalid":"")}),f&&!p&&r.a.createElement("div",{className:"invalid-feedback"},"Username is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",value:g,onChange:y,className:"form-control"+(f&&!g?" is-invalid":"")}),f&&!g&&r.a.createElement("div",{className:"invalid-feedback"},"Password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},b&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login")),r.a.createElement("div",{className:"form-group"},f&&u&&r.a.createElement("div",{style:{color:"red"},className:"invalid-feedback"},u))))}function D(){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},r.a.createElement(T.c,{history:c},r.a.createElement(T.d,null,r.a.createElement(T.b,{exact:!0,path:"/",component:q}),r.a.createElement(T.b,{exact:!0,path:"/user-dashboard",component:q}),r.a.createElement(T.b,{path:"/login",component:q}),r.a.createElement(T.b,{path:"/home",component:G}),r.a.createElement(T.b,{path:"/blogs/:blogId",component:P}),r.a.createElement(T.a,{from:"*",to:"/"}))))))}Object(o.render)(r.a.createElement(l.a,{store:U},r.a.createElement(D,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.243394e0.chunk.js.map